---
name: ecs-service-broker
icon_file: resources/icon.png
label: DELL EMC ECS Broker
description: ECS Broker for Pivotal CF
metadata_version: 1.8
rank: 50
stemcell_criteria:
  os: ubuntu-trusty
  version: '3541.2'
  requires_cpi: false
properties:
- name: service1_guid
  type: uuid
- name: service2_guid
  type: uuid
- name: service3_guid
  type: uuid
- name: service4_guid
  type: uuid
- name: service5_guid
  type: uuid
- name: encryption_key
  type: secret
- name: broker_credentials
  type: simple_credentials
  default:
    identity: user
- name: vm_credentials
  type: salted_credentials
  default:
    identity: vcap
- name: org_quota
  type: integer
  configurable: false
  constraints:
    min: 512
    max: 4096
  default: 4096
- name: memory
  type: integer
  configurable: false
  constraints:
    min: 256
    max: 4096
  default: 4096
forms:
- name: ecs_broker_app
  label: Service Broker Application
  description: Service Broker CF App Configuration Details
  properties:
    - name: app_name
      type: string
      label: Service Broker Application Name
      description: Enter the name for the Service Broker App
      configurable: true
      default: ecs-broker
    - name: app_version
      label: Service Broker Application version
      description: Enter the version of the Service Broker App (Final app name would include app version like ${appName}-${appversion}
      type: string
      configurable: true
      default: v1
    - name: app_uri
      label: Service Broker Application URI
      description: Enter the URI/endpoint for the Service Broker app (on push to CF)
      type: string
      configurable: true
      default: ecs-broker
    - name: create_open_security_group
      label: Open up Security Groups
      description: Open up security group on CF for Service Broker to access other apps or CF Cloud Controller
      type: boolean
      configurable: true
    - name: enable_global_access_to_plans
      label: Enable Global access to all Services and Plans
      description: Open up access to all service plans across all orgs and spaces. If set to false, administrators must use the "enable-service-access" command to allow access
      type: boolean
      configurable: true
      default: true
- name: ecs_connection
  label: Dell EMC ECS Connectivity
  description: Service Broker ECS Connection Details
  properties:
    - name: management_endpoint
      label: ECS Management Endpoint
      description: Enter the URI/endpoint for the ECS HTTPS management API. This is typically accessed from port `4443`, but may be on a different port if accessed through a load balancer
      type: string
      configurable: true
    - name: replication_group
      label: Replication Group
      description: Enter the name of the ECS "replication group" to be used for created buckets. This can be found in the ECS management UI
      type: string
      configurable: true
    - name: namespace
      label: Namespace
      description: Enter the name of the ECS "namespace" to be used for created buckets and users. This can be found in the ECS management UI
      type: string
      configurable: true
    - name: api_username
      label: ECS Admin Username
      description: Enter the name of the ECS Management API admin user. This should be a namespace admin or system administrator management user on the ECS
      type: string
      configurable: true
    - name: api_password
      label: ECS Admin Password
      description: Enter the ECS Management API password
      type: string
      configurable: true
    - name: base_url
      label: ECS Base URL
      description: (Optional) Enter the name of the ECS configured base URL, to discover the object endpoint. If not provided, the broker will attempt to discover a default base URL. Alternatively, the URI/endpoint can be specified using the "Object Endpoint" parameter
      type: string
      configurable: true
      optional: true
    - name: certificate_selector
      label: Is the ECS SSL certificate is signed by a trust authority?
      description: If the ECS does not have a properly signed certificate from a trust authority (a self-signed certificate, for example), then customers will need to provide the SSL certificate.
      default: "No"
      configurable: true
      type: selector
      option_templates:
      - name: untrusted_ssl
        select_value: "No"
        property_blueprints:
        - name: certificate
          label: ECS Management Certificate
          description: SSL certificate to enable broker to communicate with ECS API Managment. This is required for self-signed certificates, but may not be needed when the ECS is configured with a signed certificate from a trusted source
          type: text
          configurable: true
          optional: true
      - name: trusted_ssl
        select_value: "Yes"
        property_blueprints: []
    - name: object_endpoint
      label: ECS Object Endpoint
      description: (Optional) Manually specify the URI/endpoint of the ECS S3 API, rather than discover from the ECS configured "base URL". This is typically accessed form port 9020 (HTTP) or port 9021 (HTTPS), but may be on a different port if accessed through a load balancer
      type: string
      configurable: true
      optional: true
- name: broker_service_details
  label: Service Broker Webservice Settings
  description: Service Broker Webservice Settings
  properties:
    - name: api_version
      label: Service Broker API Version
      description: The Cloud Foundry service broker API version that the broker should advertise. This should be configured to be compatible with the release of Cloud Foundry
      type: string
      configurable: true
      default: "*"
    - name: prefix
      label: Broker Prefix
      description: (Optional) Enter a string used to prefix all broker created buckets and users. Defaults to "ecs-cf-broker-"
      type: string
      configurable: true
      optional: true
    - name: repository_endpoint
      label: Repository Endpoint
      description: (Optional) Enter the URI/endpoint for the ECS S3 API that should be used for storing broker metadata.  Defaults to the object endpoint or base URL
      type: string
      configurable: true
      optional: true
    - name: repository_user
      label: Repository User
      description: (Optional) Enter the name of the user that should be created/used for managing broker metadata. Defaults to "{prefix}-user"
      type: string
      configurable: true
      optional: true
    - name: repository_bucket
      label: Repository Bucket
      description: (Optional) Enter the name of the bucket that should be created/used for managing broker metadata. Defaults to {prefix}-repository
      type: string
      configurable: true
      optional: true
- name: service1
  label: Catalog Service 1
  description: Configure Catalog Service 1
  properties:
  - name: service1_active
    default: true
    label: Enable Catalog Service 1
    description: If enabled, this service will be included in the broker catalog, which supplies the Cloud Foundry marketplace.
    configurable: true
    type: boolean
  - name: service1_name
    label: Name
    type: string
    configurable: true
    description: Service named used in the Cloud Foundry marketplace. This should be kept fairly short
    default: ecs-bucket
  - name: service1_description
    label: Description
    type: string
    configurable: true
    description: Full description of the service appearing in the marketplace
    default: Dell EMC ECS private object storage bucket
  - name: service1_display_name
    default: ECS Bucket
    label: Display Name
    type: string
    configurable: true
    description: The name that will show in the PCF Apps Manager Marketplace
  - name: service1_image_url
    label: Image URL
    type: http_url
    configurable: true
    default: https://avatars.githubusercontent.com/u/12926680
    description: The image that will show in the PCF Apps Manager Marketplace
  - name: service1_long_description
    default: Dell EMC Elastic Cloud Storage (ECS) private object storage Bucket
    type: text
    label: Long Description
    configurable: true
    description: A long description to use for the service, which will show in the PCF Apps Manager Marketplace
  - name: service1_provider_display_name
    label: Provider Display Name
    type: string
    default: Dell EMC
    configurable: true
    description: Provider name that will show in the PCF Apps Manager Marketplace
  - name: service1_documentation_url
    label: Documentation URL
    type: http_url
    configurable: true
    default: https://community.emc.com/docs/DOC-45012
    description: The documentation link that will show in the PCF Apps Manager Marketplace
  - name: service1_tags
    type: string_list
    label: Tags
    configurable: true
    description: Tags for service. These can be used by applications or cloud services (such as Spring Cloud) to identify service offerings & instances
    default: "s3,bucket"
  - name: service1_support_url
    label: Support URL
    type: http_url
    configurable: true
    default: http://www.emc.com/products-solutions/trial-software-download/ecs.htm
    description: The support link that will show in the PCF Apps Manager Marketplace
  - name: service1_bindable
    label: Binable
    type: boolean
    default: true
    configurable: true
    description: Determines if this service can be bound to user applications. This should typically be enabled, but could be disabled for internal-only services
  - name: service1_service_type
    type: selector
    label: Service Type
    configurable: true
    default: Bucket
    description: Set the type of service to be available in the marketplace. A bucket provides a single bucket per service. A namespace provides a tentant "area" where multiple buckets can be provisioned
    option_templates:
    - name: namespace_option
      select_value: Namespace
      property_blueprints:
      - name: compliance_enabled
        type: boolean
        label: Enable Compliance
        default: false
        configurable: true
        description: Strongly enforce object retention for compliance. This only applies to namespace services
      - name: default_bucket_quota
        type: integer
        label: Default Bucket Quota (GB)
        optional: true
        configurable: true
        description: Default quota applied to all buckets created within this namespacedefault_bucket_quota. This only applies to namespace services
    - name: bucket_option
      select_value: Bucket
      property_blueprints:
      - name: head_type
        label: Object Head Type
        type: dropdown_select
        default: s3
        configurable: false
        description: Object protocol to use for the provisioned bucket. Today the broker only supports S3, but will support Swift, Atmos & CAS in the future. This only applies to bucket services
        options:
        - name: s3
          label: S3
      - name: repository_service
        type: boolean
        label: Enable as Repository Service
        description: Use this service for the internal metadata of the broker. This should only be enabled for one service, as the broker may pick from repository enabled services at random on startup.
        configurable: true
        default: true
      - name: file_accessible
        label: Enable File Access
        type: boolean
        default: false
        configurable: true
        description: Enable NFS and HDFS access for provisioned buckets. This also enables volume mount services for the service, so a bucket can be used as an application mount point. File access cannot be changed after creation, so this setting cannot be changed by plan upgrades. This only applies to bucket services
      - name: default_retention
        type: integer
        label: Default Retention (Seconds)
        optional: true
        configurable: true
        description: The default object number of seconds an object should be retained. The object cannot be deleted until that time has elapsed. This can be set to -1 for infinite retention. This only applies to bucket services. Setting default retention in the service will _override_ default retention at within a plan.
  - name: service1_encrypted
    label: Enable Encryption
    type: boolean
    default: false
    configurable: true
    description: Enabled encryption on this service. Encryption cannot be changed after creation, so this setting cannot be changed by plan upgrades
  - name: service1_access_during_outage
    label: Enable Access During Outage
    type: boolean
    default: true
    configurable: true
    description: This allows a bucket or namespace to remain online even if the primary site is offline. This is typically enabled, but can be disabled if strict data consistency is required, since actual replication is asynchronous. Setting access during outage in the service will _override_ access during outage at within a plan.
  - name: service1_plans
    type: collection
    label: Customize Plans for this Service
    configurable: true
    property_blueprints:
    - name: name
      type: string
      label: Name
      configurable: true
      description: Name of this service plan to show in Cloud Foundry marketplace
    - name: description
      type: string
      label: Description
      configurable: true
      description: Description of this service plan to show in Cloud Foundry marketplace
    - name: repository_plan
      type: boolean
      label: Enable as Repository Plan
      description: Use this plan for the internal metadata of the broker. This should only be enabled for one service, as the broker may pick from repository enabled plans at random on startup.
      configurable: true
      description: Description of this service plan to show in Cloud Foundry marketplace
    - name: cost_usd
      type: string
      label: Cost in US Dollars
      configurable: true
      description: The cost for the plan based on the "Cost Unit". Should be in the form of a float -- 0.00
    - name: cost_unit
      type: string
      label: Cost Unit
      configurable: true
      description: The unit for each to charge. By convention is should be in ALL CAPS. Examples include MONTHLY, PER_GB, PER_GB_PER_MONTH
    - name: bullet_1
      type: string
      label: Bullet 1
      configurable: true
      description: Bullet point to show up about the plan in the PCF Marketplace.
      optional: true
    - name: bullet_2
      type: string
      label: Bullet 2
      configurable: true
      description: Bullet point to show up about the plan in the PCF Marketplace.
      optional: true
    - name: bullet_3
      type: string
      label: Bullet 3
      configurable: true
      description: Bullet point to show up about the plan in the PCF Marketplace.
      optional: true
    - name: bullet_4
      type: string
      label: Bullet 4
      configurable: true
      description: Bullet point to show up about the plan in the PCF Marketplace.
      optional: true
    - name: bullet_5
      type: string
      label: Bullet 5
      configurable: true
      description: Bullet point to show up about the plan in the PCF Marketplace.
      optional: true
    - name: quota_limit
      type: integer
      label: Quota Limit (GB)
      optional: true
      configurable: true
      description: The capacity quota limit in gigabytes. A user will not be able to store more than this amount in a provisioned bucket or namespace
    - name: quota_warn
      type: integer
      label: Quota Warning (GB)
      optional: true
      configurable: true
      description: The capacity quota warning in gigabytes. A ECS warning notification will be generated when a user consumes this amount of storage
    - name: free
      type: boolean
      label: Free of Charge
      configurable: true
      description: Whether this service is free or paid
    - name: access_during_outage
      label: Enable Access During Outage
      type: boolean
      default: true
      configurable: true
      description: This allows a bucket or namespace to remain online even if the primary site is offline. This is typically enabled, but can be disabled if strict data consistency is required, since actual replication is asynchronous
    - name: default_retention
      type: integer
      label: Default Retention (Seconds)
      optional: true
      configurable: true
      description: The default object number of seconds an object should be retained. The object cannot be deleted until that time has elapsed. This can be set to -1 for infinite retention. This only applies to bucket services
    default:
    - name: 5gb
      description: 5 GB free trial
      cost_usd: 0.00
      cost_unit: MONTHLY
      quota_limit: 5
      quota_warn: 4
      free: true
      bullet_1: Shared Object Storage
      bullet_2: 5 GB Storage Limit
      bullet_3: S3 Protocol Access
    - name: unlimited
      repository_plan: true
      description: Usage based billing
      cost_usd: 0.03
      cost_unit: PER_GB_PER_MONTH
      bullet_1: Shared Object Storage
      bullet_2: Unlimited Storage
      bullet_3: S3 Protocol Access
- name: service2
  label: Catalog Service 2
  description: Configure Catalog Service 2
  properties:
  - name: service2_active
    default: true
    label: Enable Catalog Service 2
    description: If enabled, this service will be included in the broker catalog, which supplies the Cloud Foundry marketplace.
    configurable: true
    type: boolean
  - name: service2_name
    label: Name
    type: string
    configurable: true
    description: Service named used in the Cloud Foundry marketplace. This should be kept fairly short
    default: ecs-namespace
  - name: service2_description
    label: Description
    type: string
    configurable: true
    description: Full description of the service appearing in the marketplace
    default: Dell EMC ECS private object storage namespace
  - name: service2_display_name
    default: ECS Namespace
    label: Display Name
    type: string
    configurable: true
    description: The name that will show in the PCF Apps Manager Marketplace
  - name: service2_image_url
    label: Image URL
    type: http_url
    configurable: true
    default: https://avatars.githubusercontent.com/u/12926680
    description: The image that will show in the PCF Apps Manager Marketplace
  - name: service2_long_description
    default: Dell EMC Elastic Cloud Storage (ECS) private object storage Namespace
    type: text
    label: Long Description
    configurable: true
    description: A long description to use for the service, which will show in the PCF Apps Manager Marketplace
  - name: service2_provider_display_name
    label: Provider Display Name
    type: string
    default: Dell EMC
    configurable: true
    description: Provider name that will show in the PCF Apps Manager Marketplace
  - name: service2_documentation_url
    label: Documentation URL
    type: http_url
    configurable: true
    default: https://community.emc.com/docs/DOC-45012
    description: The documentation link that will show in the PCF Apps Manager Marketplace
  - name: service2_tags
    type: string_list
    label: Tags
    configurable: true
    description: Tags for service. These can be used by applications or cloud services (such as Spring Cloud) to identify service offerings & instances
    default: "s3,namespace"
  - name: service2_support_url
    label: Support URL
    type: http_url
    configurable: true
    default: http://www.emc.com/products-solutions/trial-software-download/ecs.htm
    description: The support link that will show in the PCF Apps Manager Marketplace
  - name: service2_bindable
    label: Binable
    type: boolean
    default: true
    configurable: true
    description: Determines if this service can be bound to user applications. This should typically be enabled, but could be disabled for internal-only services
  - name: service2_service_type
    type: selector
    label: Service Type
    configurable: true
    default: Namespace
    description: Set the type of service to be available in the marketplace. A bucket provides a single bucket per service. A namespace provides a tentant "area" where multiple buckets can be provisioned
    option_templates:
    - name: namespace_option
      select_value: Namespace
      property_blueprints:
      - name: compliance_enabled
        type: boolean
        label: Enable Compliance
        default: false
        configurable: true
        description: Strongly enforce object retention for compliance. This only applies to namespace services
      - name: default_bucket_quota
        type: integer
        label: Default Bucket Quota (GB)
        optional: true
        configurable: true
        description: Default quota applied to all buckets created within this namespacedefault_bucket_quota. This only applies to namespace services
    - name: bucket_option
      select_value: Bucket
      property_blueprints:
      - name: head_type
        label: Object Head Type
        type: dropdown_select
        default: s3
        configurable: false
        description: Object protocol to use for the provisioned bucket. Today the broker only supports S3, but will support Swift, Atmos & CAS in the future. This only applies to bucket services
        options:
        - name: s3
          label: S3
      - name: repository_service
        type: boolean
        label: Enable as Repository Service
        description: Use this service for the internal metadata of the broker. This should only be enabled for one service, as the broker may pick from repository enabled services at random on startup.
        configurable: true
        default: false
      - name: file_accessible
        label: Enable File Access
        type: boolean
        default: false
        configurable: true
        description: Enable NFS and HDFS access for provisioned buckets. This also enables volume mount services for the service, so a bucket can be used as an application mount point. File access cannot be changed after creation, so this setting cannot be changed by plan upgrades. This only applies to bucket services
      - name: default_retention
        type: integer
        label: Default Retention (Seconds)
        optional: true
        configurable: true
        description: The default object number of seconds an object should be retained. The object cannot be deleted until that time has elapsed. This can be set to -1 for infinite retention. This only applies to bucket services. Setting default retention in the service will _override_ default retention at within a plan.
  - name: service2_encrypted
    label: Enable Encryption
    type: boolean
    default: false
    configurable: true
    description: Enabled encryption on this service. Encryption cannot be changed after creation, so this setting cannot be changed by plan upgrades
  - name: service2_access_during_outage
    label: Enable Access During Outage
    type: boolean
    default: true
    configurable: true
    description: This allows a bucket or namespace to remain online even if the primary site is offline. This is typically enabled, but can be disabled if strict data consistency is required, since actual replication is asynchronous. Setting access during outage in the service will _override_ access during outage at within a plan.
  - name: service2_plans
    type: collection
    label: Customize Plans for this Service
    configurable: true
    property_blueprints:
    - name: name
      type: string
      label: Name
      configurable: true
      description: Name of this service plan to show in Cloud Foundry marketplace
    - name: description
      type: string
      label: Description
      configurable: true
      description: Description of this service plan to show in Cloud Foundry marketplace
    - name: repository_plan
      type: boolean
      label: Enable as Repository Plan
      description: Use this plan for the internal metadata of the broker. This should only be enabled for one service, as the broker may pick from repository enabled plans at random on startup.
      configurable: true
      description: Description of this service plan to show in Cloud Foundry marketplace
    - name: cost_usd
      type: string
      label: Cost in US Dollars
      configurable: true
      description: The cost for the plan based on the "Cost Unit". Should be in the form of a float -- 0.00
    - name: cost_unit
      type: string
      label: Cost Unit
      configurable: true
      description: The unit for each to charge. By convention is should be in ALL CAPS. Examples include MONTHLY, PER_GB, PER_GB_PER_MONTH
    - name: bullet_1
      type: string
      label: Bullet 1
      configurable: true
      description: Bullet point to show up about the plan in the PCF Marketplace.
      optional: true
    - name: bullet_2
      type: string
      label: Bullet 2
      configurable: true
      description: Bullet point to show up about the plan in the PCF Marketplace.
      optional: true
    - name: bullet_3
      type: string
      label: Bullet 3
      configurable: true
      description: Bullet point to show up about the plan in the PCF Marketplace.
      optional: true
    - name: bullet_4
      type: string
      label: Bullet 4
      configurable: true
      description: Bullet points to show up about the plan in the PCF Marketplace.
      optional: true
    - name: bullet_5
      type: string
      label: Bullet 5
      configurable: true
      description: Bullet points to show up about the plan in the PCF Marketplace.
      optional: true
    - name: quota_limit
      type: integer
      label: Quota Limit (GB)
      optional: true
      configurable: true
      description: The capacity quota limit in gigabytes. A user will not be able to store more than this amount in a provisioned bucket or namespace
    - name: quota_warn
      type: integer
      label: Quota Warning (GB)
      optional: true
      configurable: true
      description: The capacity quota warning in gigabytes. A ECS warning notification will be generated when a user consumes this amount of storage
    - name: free
      type: boolean
      label: Free of Charge
      configurable: true
      description: Whether this service is free or paid
    - name: access_during_outage
      label: Enable Access During Outage
      type: boolean
      default: true
      configurable: true
      description: This allows a bucket or namespace to remain online even if the primary site is offline. This is typically enabled, but can be disabled if strict data consistency is required, since actual replication is asynchronous
    - name: default_retention
      type: integer
      label: Default Retention (Seconds)
      optional: true
      configurable: true
      description: The default object number of seconds an object should be retained. The object cannot be deleted until that time has elapsed. This can be set to -1 for infinite retention. This only applies to bucket services
    default:
    - name: 5gb
      description: 5 GB free trial
      cost_usd: 0.00
      cost_unit: MONTHLY
      quota_limit: 5
      quota_warn: 4
      free: true
      bullet_1: Shared Object Storage
      bullet_2: 5 GB Storage Limit
      bullet_3: S3 Protocol Access
    - name: unlimited
      description: Usage based billing
      cost_usd: 0.03
      cost_unit: PER_GB_PER_MONTH
      bullet_1: Shared Object Storage
      bullet_2: Unlimited Storage
      bullet_3: S3 Protocol Access
- name: service3
  label: Catalog Service 3
  description: Configure Catalog Service 3
  properties:
  - name: service3_active
    default: true
    label: Enable Catalog Service 3
    description: If enabled, this service will be included in the broker catalog, which supplies the Cloud Foundry marketplace.
    configurable: true
    type: boolean
  - name: service3_name
    label: Name
    type: string
    configurable: true
    description: Service named used in the Cloud Foundry marketplace. This should be kept fairly short
    default: ecs-file-bucket
  - name: service3_description
    label: Description
    type: string
    configurable: true
    description: Full description of the service appearing in the marketplace
    default: Dell EMC ECS private object storage bucket with file support
  - name: service3_display_name
    default: ECS File-Enabled Bucket
    label: Display Name
    type: string
    configurable: true
    description: The name that will show in the PCF Apps Manager Marketplace
  - name: service3_image_url
    label: Image URL
    type: http_url
    configurable: true
    default: https://avatars.githubusercontent.com/u/12926680
    description: The image that will show in the PCF Apps Manager Marketplace
  - name: service3_long_description
    default: Dell EMC Elastic Cloud Storage (ECS) object storage bucket with support for file protocols. Supports S3, NFS and HDFS access.
    type: text
    label: Long Description
    configurable: true
    description: A long description to use for the service, which will show in the PCF Apps Manager Marketplace
  - name: service3_provider_display_name
    label: Provider Display Name
    type: string
    default: Dell EMC
    configurable: true
    description: Provider name that will show in the PCF Apps Manager Marketplace
  - name: service3_documentation_url
    label: Documentation URL
    type: http_url
    configurable: true
    default: https://community.emc.com/docs/DOC-45012
    description: The documentation link that will show in the PCF Apps Manager Marketplace
  - name: service3_tags
    type: string_list
    label: Tags
    configurable: true
    description: Tags for service. These can be used by applications or cloud services (such as Spring Cloud) to identify service offerings & instances
    default: "s3,bucket,nfs,hdfs"
  - name: service3_support_url
    label: Support URL
    type: http_url
    configurable: true
    default: http://www.emc.com/products-solutions/trial-software-download/ecs.htm
    description: The support link that will show in the PCF Apps Manager Marketplace
  - name: service3_bindable
    label: Binable
    type: boolean
    default: true
    configurable: true
    description: Determines if this service can be bound to user applications. This should typically be enabled, but could be disabled for internal-only services
  - name: service3_service_type
    type: selector
    label: Service Type
    configurable: true
    default: Bucket
    description: Set the type of service to be available in the marketplace. A bucket provides a single bucket per service. A namespace provides a tentant "area" where multiple buckets can be provisioned
    option_templates:
    - name: namespace_option
      select_value: Namespace
      property_blueprints:
      - name: compliance_enabled
        type: boolean
        label: Enable Compliance
        default: false
        configurable: true
        description: Strongly enforce object retention for compliance. This only applies to namespace services
      - name: default_bucket_quota
        type: integer
        label: Default Bucket Quota (GB)
        optional: true
        configurable: true
        description: Default quota applied to all buckets created within this namespacedefault_bucket_quota. This only applies to namespace services
    - name: bucket_option
      select_value: Bucket
      property_blueprints:
      - name: head_type
        label: Object Head Type
        type: dropdown_select
        default: s3
        configurable: false
        description: Object protocol to use for the provisioned bucket. Today the broker only supports S3, but will support Swift, Atmos & CAS in the future. This only applies to bucket services
        options:
        - name: s3
          label: S3
      - name: repository_service
        type: boolean
        label: Enable as Repository Service
        description: Use this service for the internal metadata of the broker. This should only be enabled for one service, as the broker may pick from repository enabled services at random on startup.
        configurable: true
        default: false
      - name: file_accessible
        label: Enable File Access
        type: boolean
        default: true
        configurable: true
        description: Enable NFS and HDFS access for provisioned buckets. This also enables volume mount services for the service, so a bucket can be used as an application mount point. File access cannot be changed after creation, so this setting cannot be changed by plan upgrades. This only applies to bucket services
      - name: default_retention
        type: integer
        label: Default Retention (Seconds)
        optional: true
        configurable: true
        description: The default object number of seconds an object should be retained. The object cannot be deleted until that time has elapsed. This can be set to -1 for infinite retention. This only applies to bucket services. Setting default retention in the service will _override_ default retention at within a plan.
  - name: service3_encrypted
    label: Enable Encryption
    type: boolean
    default: false
    configurable: true
    description: Enabled encryption on this service. Encryption cannot be changed after creation, so this setting cannot be changed by plan upgrades
  - name: service3_access_during_outage
    label: Enable Access During Outage
    type: boolean
    default: true
    configurable: true
    description: This allows a bucket or namespace to remain online even if the primary site is offline. This is typically enabled, but can be disabled if strict data consistency is required, since actual replication is asynchronous. Setting access during outage in the service will _override_ access during outage at within a plan.
  - name: service3_plans
    type: collection
    label: Customize Plans for this Service
    configurable: true
    property_blueprints:
    - name: name
      type: string
      label: Name
      configurable: true
      description: Name of this service plan to show in Cloud Foundry marketplace
    - name: description
      type: string
      label: Description
      configurable: true
      description: Description of this service plan to show in Cloud Foundry marketplace
    - name: repository_plan
      type: boolean
      label: Enable as Repository Plan
      description: Use this plan for the internal metadata of the broker. This should only be enabled for one service, as the broker may pick from repository enabled plans at random on startup.
      configurable: true
      description: Description of this service plan to show in Cloud Foundry marketplace
    - name: cost_usd
      type: string
      label: Cost in US Dollars
      configurable: true
      description: The cost for the plan based on the "Cost Unit". Should be in the form of a float -- 0.00
    - name: cost_unit
      type: string
      label: Cost Unit
      configurable: true
      description: The unit for each to charge. By convention is should be in ALL CAPS. Examples include MONTHLY, PER_GB, PER_GB_PER_MONTH
    - name: bullet_1
      type: string
      label: Bullet 1
      configurable: true
      description: Bullet point to show up about the plan in the PCF Marketplace.
      optional: true
    - name: bullet_2
      type: string
      label: Bullet 2
      configurable: true
      description: Bullet point to show up about the plan in the PCF Marketplace.
      optional: true
    - name: bullet_3
      type: string
      label: Bullet 3
      configurable: true
      description: Bullet point to show up about the plan in the PCF Marketplace.
      optional: true
    - name: bullet_4
      type: string
      label: Bullet 4
      configurable: true
      description: Bullet point to show up about the plan in the PCF Marketplace.
      optional: true
    - name: bullet_5
      type: string
      label: Bullet 5
      configurable: true
      description: Bullet point to show up about the plan in the PCF Marketplace.
      optional: true
    - name: quota_limit
      type: integer
      label: Quota Limit (GB)
      optional: true
      configurable: true
      description: The capacity quota limit in gigabytes. A user will not be able to store more than this amount in a provisioned bucket or namespace
    - name: quota_warn
      type: integer
      label: Quota Warning (GB)
      optional: true
      configurable: true
      description: The capacity quota warning in gigabytes. A ECS warning notification will be generated when a user consumes this amount of storage
    - name: free
      type: boolean
      label: Free of Charge
      configurable: true
      description: Whether this service is free or paid
    - name: access_during_outage
      label: Enable Access During Outage
      type: boolean
      default: true
      configurable: true
      description: This allows a bucket or namespace to remain online even if the primary site is offline. This is typically enabled, but can be disabled if strict data consistency is required, since actual replication is asynchronous
    - name: default_retention
      type: integer
      label: Default Retention (Seconds)
      optional: true
      configurable: true
      description: The default object number of seconds an object should be retained. The object cannot be deleted until that time has elapsed. This can be set to -1 for infinite retention. This only applies to bucket services
    default:
    - name: 5gb
      description: 5 GB free trial
      cost_usd: 0.00
      cost_unit: MONTHLY
      quota_limit: 5
      quota_warn: 4
      free: true
      bullet_1: Shared Object Storage
      bullet_2: 5 GB Storage Limit
      bullet_3: S3 Protocol Access
      bullet_4: NFS Access, with PCF persistent volumes
      bullet_5: HDFS Access
    - name: unlimited
      description: Usage based billing
      cost_usd: 0.03
      cost_unit: PER_GB_PER_MONTH
      bullet_1: Shared Object Storage
      bullet_2: Unlimited Storage
      bullet_3: S3 Protocol Access
      bullet_4: NFS Access, with PCF persistent volumes
      bullet_5: HDFS Access
- name: service4
  label: Catalog Service 4
  description: Configure Catalog Service 4
  properties:
  - name: service4_active
    default: false
    label: Enable Catalog Service 4
    description: If enabled, this service will be included in the broker catalog, which supplies the Cloud Foundry marketplace.
    configurable: true
    type: boolean
  - name: service4_name
    label: Name
    type: string
    configurable: true
    description: Service named used in the Cloud Foundry marketplace. This should be kept fairly short
    optional: true
  - name: service4_description
    label: Description
    type: string
    configurable: true
    description: Full description of the service appearing in the marketplace
    optional: true
  - name: service4_display_name
    label: Display Name
    type: string
    configurable: true
    description: The name that will show in the PCF Apps Manager Marketplace
    optional: true
  - name: service4_image_url
    label: Image URL
    type: http_url
    configurable: true
    default: https://avatars.githubusercontent.com/u/12926680
    description: The image that will show in the PCF Apps Manager Marketplace
  - name: service4_long_description
    type: text
    label: Long Description
    configurable: true
    description: A long description to use for the service, which will show in the PCF Apps Manager Marketplace
    optional: true
  - name: service4_provider_display_name
    label: Provider Display Name
    type: string
    default: Dell EMC
    configurable: true
    description: Provider name that will show in the PCF Apps Manager Marketplace
  - name: service4_documentation_url
    label: Documentation URL
    type: http_url
    configurable: true
    default: https://community.emc.com/docs/DOC-45012
    description: The documentation link that will show in the PCF Apps Manager Marketplace
  - name: service4_tags
    type: string_list
    label: Tags
    configurable: true
    description: Tags for service. These can be used by applications or cloud services (such as Spring Cloud) to identify service offerings & instances
    default: "s3"
  - name: service4_support_url
    label: Support URL
    type: http_url
    configurable: true
    default: http://www.emc.com/products-solutions/trial-software-download/ecs.htm
    description: The support link that will show in the PCF Apps Manager Marketplace
  - name: service4_bindable
    label: Binable
    type: boolean
    default: true
    configurable: true
    description: Determines if this service can be bound to user applications. This should typically be enabled, but could be disabled for internal-only services
  - name: service4_service_type
    type: selector
    label: Service Type
    configurable: true
    default: Bucket
    description: Set the type of service to be available in the marketplace. A bucket provides a single bucket per service. A namespace provides a tentant "area" where multiple buckets can be provisioned
    option_templates:
    - name: namespace_option
      select_value: Namespace
      property_blueprints:
      - name: compliance_enabled
        type: boolean
        label: Enable Compliance
        default: false
        configurable: true
        description: Strongly enforce object retention for compliance. This only applies to namespace services
      - name: default_bucket_quota
        type: integer
        label: Default Bucket Quota (GB)
        optional: true
        configurable: true
        description: Default quota applied to all buckets created within this namespacedefault_bucket_quota. This only applies to namespace services
    - name: bucket_option
      select_value: Bucket
      property_blueprints:
      - name: head_type
        label: Object Head Type
        type: dropdown_select
        default: s3
        configurable: false
        description: Object protocol to use for the provisioned bucket. Today the broker only supports S3, but will support Swift, Atmos & CAS in the future. This only applies to bucket services
        options:
        - name: s3
          label: S3
      - name: repository_service
        type: boolean
        label: Enable as Repository Service
        description: Use this service for the internal metadata of the broker. This should only be enabled for one service, as the broker may pick from repository enabled services at random on startup.
        configurable: true
        default: false
      - name: file_accessible
        label: Enable File Access
        type: boolean
        default: false
        configurable: true
        description: Enable NFS and HDFS access for provisioned buckets. This also enables volume mount services for the service, so a bucket can be used as an application mount point. File access cannot be changed after creation, so this setting cannot be changed by plan upgrades. This only applies to bucket services
      - name: default_retention
        type: integer
        label: Default Retention (Seconds)
        optional: true
        configurable: true
        description: The default object number of seconds an object should be retained. The object cannot be deleted until that time has elapsed. This can be set to -1 for infinite retention. This only applies to bucket services. Setting default retention in the service will _override_ default retention at within a plan.
  - name: service4_encrypted
    label: Enable Encryption
    type: boolean
    default: false
    configurable: true
    description: Enabled encryption on this service. Encryption cannot be changed after creation, so this setting cannot be changed by plan upgrades
  - name: service4_access_during_outage
    label: Enable Access During Outage
    type: boolean
    default: true
    configurable: true
    description: This allows a bucket or namespace to remain online even if the primary site is offline. This is typically enabled, but can be disabled if strict data consistency is required, since actual replication is asynchronous. Setting access during outage in the service will _override_ access during outage at within a plan.
  - name: service4_plans
    type: collection
    label: Customize Plans for this Service
    configurable: true
    optional: true
    property_blueprints:
    - name: name
      type: string
      label: Name
      configurable: true
      description: Name of this service plan to show in Cloud Foundry marketplace
    - name: description
      type: string
      label: Description
      configurable: true
      description: Description of this service plan to show in Cloud Foundry marketplace
    - name: repository_plan
      type: boolean
      label: Enable as Repository Plan
      description: Use this plan for the internal metadata of the broker. This should only be enabled for one service, as the broker may pick from repository enabled plans at random on startup.
      configurable: true
      description: Description of this service plan to show in Cloud Foundry marketplace
    - name: cost_usd
      type: string
      label: Cost in US Dollars
      configurable: true
      description: The cost for the plan based on the "Cost Unit". Should be in the form of a float -- 0.00
    - name: cost_unit
      type: string
      label: Cost Unit
      configurable: true
      description: The unit for each to charge. By convention is should be in ALL CAPS. Examples include MONTHLY, PER_GB, PER_GB_PER_MONTH
    - name: bullet_1
      type: string
      label: Bullet 1
      configurable: true
      description: Bullet point to show up about the plan in the PCF Marketplace.
      optional: true
    - name: bullet_2
      type: string
      label: Bullet 2
      configurable: true
      description: Bullet point to show up about the plan in the PCF Marketplace.
      optional: true
    - name: bullet_3
      type: string
      label: Bullet 3
      configurable: true
      description: Bullet point to show up about the plan in the PCF Marketplace.
      optional: true
    - name: bullet_4
      type: string
      label: Bullet 4
      configurable: true
      description: Bullet point to show up about the plan in the PCF Marketplace.
      optional: true
    - name: bullet_5
      type: string
      label: Bullet 5
      configurable: true
      description: Bullet point to show up about the plan in the PCF Marketplace.
      optional: true
    - name: quota_limit
      type: integer
      label: Quota Limit (GB)
      optional: true
      configurable: true
      description: The capacity quota limit in gigabytes. A user will not be able to store more than this amount in a provisioned bucket or namespace
    - name: quota_warn
      type: integer
      label: Quota Warning (GB)
      optional: true
      configurable: true
      description: The capacity quota warning in gigabytes. A ECS warning notification will be generated when a user consumes this amount of storage
    - name: free
      type: boolean
      label: Free of Charge
      configurable: true
      description: Whether this service is free or paid
    - name: access_during_outage
      label: Enable Access During Outage
      type: boolean
      default: true
      configurable: true
      description: This allows a bucket or namespace to remain online even if the primary site is offline. This is typically enabled, but can be disabled if strict data consistency is required, since actual replication is asynchronous
    - name: default_retention
      type: integer
      label: Default Retention (Seconds)
      optional: true
      configurable: true
      description: The default object number of seconds an object should be retained. The object cannot be deleted until that time has elapsed. This can be set to -1 for infinite retention. This only applies to bucket services
- name: service5
  label: Catalog Service 5
  description: Configure Catalog Service 5
  properties:
  - name: service5_active
    default: false
    label: Enable Catalog Service 5
    description: If enabled, this service will be included in the broker catalog, which supplies the Cloud Foundry marketplace.
    configurable: true
    type: boolean
  - name: service5_name
    label: Name
    type: string
    configurable: true
    description: Service named used in the Cloud Foundry marketplace. This should be kept fairly short
    optional: true
  - name: service5_description
    label: Description
    type: string
    configurable: true
    description: Full description of the service appearing in the marketplace
    optional: true
  - name: service5_display_name
    label: Display Name
    type: string
    configurable: true
    description: The name that will show in the PCF Apps Manager Marketplace
    optional: true
  - name: service5_image_url
    label: Image URL
    type: http_url
    configurable: true
    default: https://avatars.githubusercontent.com/u/12926680
    description: The image that will show in the PCF Apps Manager Marketplace
  - name: service5_long_description
    type: text
    label: Long Description
    configurable: true
    description: A long description to use for the service, which will show in the PCF Apps Manager Marketplace
    optional: true
  - name: service5_provider_display_name
    label: Provider Display Name
    type: string
    default: Dell EMC
    configurable: true
    description: Provider name that will show in the PCF Apps Manager Marketplace
  - name: service5_documentation_url
    label: Documentation URL
    type: http_url
    configurable: true
    default: https://community.emc.com/docs/DOC-45012
    description: The documentation link that will show in the PCF Apps Manager Marketplace
  - name: service5_tags
    type: string_list
    label: Tags
    configurable: true
    description: Tags for service. These can be used by applications or cloud services (such as Spring Cloud) to identify service offerings & instances
    default: "s3"
  - name: service5_support_url
    label: Support URL
    type: http_url
    configurable: true
    default: http://www.emc.com/products-solutions/trial-software-download/ecs.htm
    description: The support link that will show in the PCF Apps Manager Marketplace
  - name: service5_bindable
    label: Binable
    type: boolean
    default: true
    configurable: true
    description: Determines if this service can be bound to user applications. This should typically be enabled, but could be disabled for internal-only services
  - name: service5_service_type
    type: selector
    label: Service Type
    configurable: true
    default: Bucket
    description: Set the type of service to be available in the marketplace. A bucket provides a single bucket per service. A namespace provides a tentant "area" where multiple buckets can be provisioned
    option_templates:
    - name: namespace_option
      select_value: Namespace
      property_blueprints:
      - name: compliance_enabled
        type: boolean
        label: Enable Compliance
        default: false
        configurable: true
        description: Strongly enforce object retention for compliance. This only applies to namespace services
      - name: default_bucket_quota
        type: integer
        label: Default Bucket Quota (GB)
        optional: true
        configurable: true
        description: Default quota applied to all buckets created within this namespacedefault_bucket_quota. This only applies to namespace services
    - name: bucket_option
      select_value: Bucket
      property_blueprints:
      - name: head_type
        label: Object Head Type
        type: dropdown_select
        default: s3
        configurable: false
        description: Object protocol to use for the provisioned bucket. Today the broker only supports S3, but will support Swift, Atmos & CAS in the future. This only applies to bucket services
        options:
        - name: s3
          label: S3
      - name: repository_service
        type: boolean
        label: Enable as Repository Service
        description: Use this service for the internal metadata of the broker. This should only be enabled for one service, as the broker may pick from repository enabled services at random on startup.
        configurable: true
        default: false
      - name: file_accessible
        label: Enable File Access
        type: boolean
        default: false
        configurable: true
        description: Enable NFS and HDFS access for provisioned buckets. This also enables volume mount services for the service, so a bucket can be used as an application mount point. File access cannot be changed after creation, so this setting cannot be changed by plan upgrades. This only applies to bucket services
      - name: default_retention
        type: integer
        label: Default Retention (Seconds)
        optional: true
        configurable: true
        description: The default object number of seconds an object should be retained. The object cannot be deleted until that time has elapsed. This can be set to -1 for infinite retention. This only applies to bucket services. Setting default retention in the service will _override_ default retention at within a plan.
  - name: service5_encrypted
    label: Enable Encryption
    type: boolean
    default: false
    configurable: true
    description: Enabled encryption on this service. Encryption cannot be changed after creation, so this setting cannot be changed by plan upgrades
  - name: service5_access_during_outage
    label: Enable Access During Outage
    type: boolean
    default: true
    configurable: true
    description: This allows a bucket or namespace to remain online even if the primary site is offline. This is typically enabled, but can be disabled if strict data consistency is required, since actual replication is asynchronous. Setting access during outage in the service will _override_ access during outage at within a plan.
  - name: service5_plans
    type: collection
    label: Customize Plans for this Service
    configurable: true
    optional: true
    property_blueprints:
    - name: name
      type: string
      label: Name
      configurable: true
      description: Name of this service plan to show in Cloud Foundry marketplace
    - name: description
      type: string
      label: Description
      configurable: true
      description: Description of this service plan to show in Cloud Foundry marketplace
    - name: repository_plan
      type: boolean
      label: Enable as Repository Plan
      description: Use this plan for the internal metadata of the broker. This should only be enabled for one service, as the broker may pick from repository enabled plans at random on startup.
      configurable: true
      description: Description of this service plan to show in Cloud Foundry marketplace
    - name: cost_usd
      type: string
      label: Cost in US Dollars
      configurable: true
      description: The cost for the plan based on the "Cost Unit". Should be in the form of a float -- 0.00
    - name: cost_unit
      type: string
      label: Cost Unit
      configurable: true
      description: The unit for each to charge. By convention is should be in ALL CAPS. Examples include MONTHLY, PER_GB, PER_GB_PER_MONTH
    - name: bullet_1
      type: string
      label: Bullet 1
      configurable: true
      description: Bullet point to show up about the plan in the PCF Marketplace.
      optional: true
    - name: bullet_2
      type: string
      label: Bullet 2
      configurable: true
      description: Bullet point to show up about the plan in the PCF Marketplace.
      optional: true
    - name: bullet_3
      type: string
      label: Bullet 3
      configurable: true
      description: Bullet point to show up about the plan in the PCF Marketplace.
      optional: true
    - name: bullet_4
      type: string
      label: Bullet 4
      configurable: true
      description: Bullet point to show up about the plan in the PCF Marketplace.
      optional: true
    - name: bullet_5
      type: string
      label: Bullet 5
      configurable: true
      description: Bullet point to show up about the plan in the PCF Marketplace.
      optional: true
    - name: quota_limit
      type: integer
      label: Quota Limit (GB)
      optional: true
      configurable: true
      description: The capacity quota limit in gigabytes. A user will not be able to store more than this amount in a provisioned bucket or namespace
    - name: quota_warn
      type: integer
      label: Quota Warning (GB)
      optional: true
      configurable: true
      description: The capacity quota warning in gigabytes. A ECS warning notification will be generated when a user consumes this amount of storage
    - name: free
      type: boolean
      label: Free of Charge
      configurable: true
      description: Whether this service is free or paid
    - name: access_during_outage
      label: Enable Access During Outage
      type: boolean
      default: true
      configurable: true
      description: This allows a bucket or namespace to remain online even if the primary site is offline. This is typically enabled, but can be disabled if strict data consistency is required, since actual replication is asynchronous
    - name: default_retention
      type: integer
      label: Default Retention (Seconds)
      optional: true
      configurable: true
      description: The default object number of seconds an object should be retained. The object cannot be deleted until that time has elapsed. This can be set to -1 for infinite retention. This only applies to bucket services
packages:
- name: ecs-broker
  type: bosh-release
  path: resources/ecs-broker-1.5.2.tgz
  jobs:
  - name: deploy-service-broker
    resource_label: Deploy Ecs Service Broker
    templates:
    - name: deploy-service-broker
      release: ecs_broker
    lifecycle: errand
    post_deploy: true
    run_post_deploy_errand_default: when-changed
    resource_definitions:
    - name: ram
      type: integer
      configurable: false
      default: 1024
    - name: ephemeral_disk
      type: integer
      configurable: false
      default: 1024
    - name: persistent_disk
      type: integer
      configurable: false
      default: 0
    - name: cpu
      type: integer
      configurable: false
      default: 1
    static_ip: 0
    dynamic_ip: 1
    max_in_flight: 1
    instance_definitions:
    - name: instances
      type: integer
      configurable: false
      default: 1
    properties:
      security_username: (( .properties.broker_credentials.identity ))
      security_password: (( .properties.broker_credentials.password ))
      certificate: (( .properties.certificate_selector.untrusted_ssl.certificate.value ))
      catalog_services:
      - active: (( .properties.service1_active.value ))
        service_guid: (( .properties.service1_guid.value ))
        name: (( .properties.service1_name.value ))
        repository_service: (( .properties.service1_service_type.bucket_option.repository_service.value ))
        description: (( .properties.service1_description.value ))
        bindable: (( .properties.service1_bindable.value ))
        tags: (( .properties.service1_tags.parsed_strings ))
        display_name: (( .properties.service1_display_name.value ))
        image_url: (( .properties.service1_image_url.value ))
        long_description: (( .properties.service1_long_description.value ))
        provider_display_name: (( .properties.service1_provider_display_name.value ))
        documentation_url: (( .properties.service1_documentation_url.value ))
        support_url: (( .properties.service1_support_url.value ))
        service_type: (( .properties.service1_service_type.value ))
        compliance_enabled: (( .properties.service1_service_type.namespace_option.compliance_enabled.value ))
        default_bucket_quota: (( .properties.service1_service_type.namespace_option.default_bucket_quota.value ))
        head_type: (( .properties.service1_service_type.bucket_option.head_type.value ))
        file_accessible: (( .properties.service1_service_type.bucket_option.file_accessible.value ))
        default_retention: (( .properties.service1_service_type.bucket_option.default_retention.value ))
        encrypted: (( .properties.service1_encrypted.value ))
        access_during_outage: (( .properties.service1_access_during_outage.value ))
        quota_limit: (( .properties.service1_quota_limit.value ))
        quota_warn: (( .properties.service1_quota_warn.value ))
        plans: (( .properties.service1_plans.value ))
      - active: (( .properties.service2_active.value ))
        service_guid: (( .properties.service2_guid.value ))
        name: (( .properties.service2_name.value ))
        repository_service: (( .properties.service2_service_type.bucket_option.repository_service.value ))
        description: (( .properties.service2_description.value ))
        bindable: (( .properties.service2_bindable.value ))
        tags: (( .properties.service2_tags.parsed_strings ))
        display_name: (( .properties.service2_display_name.value ))
        image_url: (( .properties.service2_image_url.value ))
        long_description: (( .properties.service2_long_description.value ))
        provider_display_name: (( .properties.service2_provider_display_name.value ))
        documentation_url: (( .properties.service2_documentation_url.value ))
        support_url: (( .properties.service2_support_url.value ))
        service_type: (( .properties.service2_service_type.value ))
        compliance_enabled: (( .properties.service2_service_type.namespace_option.compliance_enabled.value ))
        default_bucket_quota: (( .properties.service2_service_type.namespace_option.default_bucket_quota.value ))
        head_type: (( .properties.service2_service_type.bucket_option.head_type.value ))
        file_accessible: (( .properties.service2_service_type.bucket_option.file_accessible.value ))
        default_retention: (( .properties.service2_service_type.bucket_option.default_retention.value ))
        encrypted: (( .properties.service2_encrypted.value ))
        access_during_outage: (( .properties.service2_access_during_outage.value ))
        quota_limit: (( .properties.service2_quota_limit.value ))
        quota_warn: (( .properties.service2_quota_warn.value ))
        plans: (( .properties.service2_plans.value ))
      - active: (( .properties.service3_active.value ))
        service_guid: (( .properties.service3_guid.value ))
        name: (( .properties.service3_name.value ))
        repository_service: (( .properties.service3_service_type.bucket_option.repository_service.value ))
        description: (( .properties.service3_description.value ))
        bindable: (( .properties.service3_bindable.value ))
        tags: (( .properties.service3_tags.parsed_strings ))
        display_name: (( .properties.service3_display_name.value ))
        image_url: (( .properties.service3_image_url.value ))
        long_description: (( .properties.service3_long_description.value ))
        provider_display_name: (( .properties.service3_provider_display_name.value ))
        documentation_url: (( .properties.service3_documentation_url.value ))
        support_url: (( .properties.service3_support_url.value ))
        service_type: (( .properties.service3_service_type.value ))
        compliance_enabled: (( .properties.service3_service_type.namespace_option.compliance_enabled.value ))
        default_bucket_quota: (( .properties.service3_service_type.namespace_option.default_bucket_quota.value ))
        head_type: (( .properties.service3_service_type.bucket_option.head_type.value ))
        file_accessible: (( .properties.service3_service_type.bucket_option.file_accessible.value ))
        default_retention: (( .properties.service3_service_type.bucket_option.default_retention.value ))
        encrypted: (( .properties.service3_encrypted.value ))
        access_during_outage: (( .properties.service3_access_during_outage.value ))
        quota_limit: (( .properties.service3_quota_limit.value ))
        quota_warn: (( .properties.service3_quota_warn.value ))
        plans: (( .properties.service3_plans.value ))
      - active: (( .properties.service4_active.value ))
        service_guid: (( .properties.service4_guid.value ))
        name: (( .properties.service4_name.value ))
        repository_service: (( .properties.service4_service_type.bucket_option.repository_service.value ))
        description: (( .properties.service4_description.value ))
        bindable: (( .properties.service4_bindable.value ))
        tags: (( .properties.service4_tags.parsed_strings ))
        display_name: (( .properties.service4_display_name.value ))
        image_url: (( .properties.service4_image_url.value ))
        long_description: (( .properties.service4_long_description.value ))
        provider_display_name: (( .properties.service4_provider_display_name.value ))
        documentation_url: (( .properties.service4_documentation_url.value ))
        support_url: (( .properties.service4_support_url.value ))
        service_type: (( .properties.service4_service_type.value ))
        compliance_enabled: (( .properties.service4_service_type.namespace_option.compliance_enabled.value ))
        default_bucket_quota: (( .properties.service4_service_type.namespace_option.default_bucket_quota.value ))
        head_type: (( .properties.service4_service_type.bucket_option.head_type.value ))
        file_accessible: (( .properties.service4_service_type.bucket_option.file_accessible.value ))
        default_retention: (( .properties.service4_service_type.bucket_option.default_retention.value ))
        encrypted: (( .properties.service4_encrypted.value ))
        access_during_outage: (( .properties.service4_access_during_outage.value ))
        quota_limit: (( .properties.service4_quota_limit.value ))
        quota_warn: (( .properties.service4_quota_warn.value ))
        plans: (( .properties.service4_plans.value ))
      - active: (( .properties.service5_active.value ))
        service_guid: (( .properties.service5_guid.value ))
        name: (( .properties.service5_name.value ))
        repository_service: (( .properties.service5_service_type.bucket_option.repository_service.value ))
        description: (( .properties.service5_description.value ))
        bindable: (( .properties.service5_bindable.value ))
        tags: (( .properties.service5_tags.parsed_strings ))
        display_name: (( .properties.service5_display_name.value ))
        image_url: (( .properties.service5_image_url.value ))
        long_description: (( .properties.service5_long_description.value ))
        provider_display_name: (( .properties.service5_provider_display_name.value ))
        documentation_url: (( .properties.service5_documentation_url.value ))
        support_url: (( .properties.service5_support_url.value ))
        service_type: (( .properties.service5_service_type.value ))
        compliance_enabled: (( .properties.service5_service_type.namespace_option.compliance_enabled.value ))
        default_bucket_quota: (( .properties.service5_service_type.namespace_option.default_bucket_quota.value ))
        head_type: (( .properties.service5_service_type.bucket_option.head_type.value ))
        file_accessible: (( .properties.service5_service_type.bucket_option.file_accessible.value ))
        default_retention: (( .properties.service5_service_type.bucket_option.default_retention.value ))
        encrypted: (( .properties.service5_encrypted.value ))
        access_during_outage: (( .properties.service5_access_during_outage.value ))
        quota_limit: (( .properties.service5_quota_limit.value ))
        quota_warn: (( .properties.service5_quota_warn.value ))
        plans: (( .properties.service5_plans.value ))
      vm_credentials:
        type: salted_credentials
        default:
          identity: vcap
  - name: register-broker
    resource_label: Register Ecs Service Broker
    templates:
    - name: register-broker
      release: ecs_broker
    lifecycle: errand
    post_deploy: true
    run_post_deploy_errand_default: when-changed
    resource_definitions:
    - name: ram
      type: integer
      configurable: false
      default: 1024
    - name: ephemeral_disk
      type: integer
      configurable: false
      default: 1024
    - name: persistent_disk
      type: integer
      configurable: false
      default: 0
    - name: cpu
      type: integer
      configurable: false
      default: 1
    static_ip: 0
    dynamic_ip: 1
    max_in_flight: 1
    instance_definitions:
    - name: instances
      type: integer
      configurable: false
      default: 1
    properties:
      security_username: (( .properties.broker_credentials.identity ))
      security_password: (( .properties.broker_credentials.password ))
      vm_credentials:
        type: salted_credentials
        default:
          identity: vcap
  - name: destroy-broker
    resource_label: Remove Ecs Service Broker
    templates:
    - name: destroy-broker
      release: ecs_broker
    lifecycle: errand
    pre_delete: true
    run_post_delete_errand_default: on
    resource_definitions:
    - name: ram
      type: integer
      configurable: false
      default: 1024
    - name: ephemeral_disk
      type: integer
      configurable: false
      default: 1024
    - name: persistent_disk
      type: integer
      configurable: false
      default: 0
    - name: cpu
      type: integer
      configurable: false
      default: 1
    static_ip: 0
    dynamic_ip: 1
    max_in_flight: 1
    instance_definitions:
    - name: instances
      type: integer
      configurable: false
      default: 1
    properties:
      vm_credentials:
        type: salted_credentials
        default:
          identity: vcap
update:
  canaries: 1
  canary_watch_time: 60000-240000
  max_in_flight: 1
  update_watch_time: 60000-240000
requires_product_versions:
- name: cf
  version: "~> 1.0"
provides_product_versions:
- name: ecs-broker
  version: '1.5.2'
post_deploy_errands:
- name: deploy-service-broker
- name: register-broker
pre_delete_errands:
- name: destroy-broker
